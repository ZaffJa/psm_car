<ion-header>
    <ion-navbar>
        <button ion-button menuToggle>
            <ion-icon name="menu"></ion-icon>
        </button>
        <ion-title>
            PROFILE
        </ion-title>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <form [formGroup]="registerForm">
        <ion-row responsive-sm>
            <ion-col>
                <ion-list>
                    <ion-title>Your Information</ion-title>
                    <ion-item>
                        <ion-label color="primary" fixed>Name</ion-label>
                        <ion-label fixed>{{ user.name }}</ion-label>
                    </ion-item>
                    <ion-item>
                        <ion-label color="primary" fixed>Matric No.</ion-label>
                        <ion-label fixed> {{ user.matric_no }} </ion-label>
                    </ion-item>
                    <br>
                    <ion-title>
                        Change User Information
                    </ion-title>
                    <ion-item>
                        <ion-label color="primary" stacked>Email</ion-label>
                        <ion-input formControlName="email" type="email" placeholder="Your current email address"></ion-input>
                    </ion-item>
                    <control-messages [control]="registerForm.controls.phone"></control-messages>
                    <ion-item>
                        <ion-label color="primary" stacked>Phone</ion-label>
                        <ion-input formControlName="phone" type="text" placeholder="Your phone"></ion-input>
                    </ion-item>
                    <control-messages [control]="registerForm.controls.phone"></control-messages>
                    <br>
                    <ion-title>
                        Change Password
                    </ion-title>
                    <ion-item>
                        <ion-label color="primary" stacked>Old Password</ion-label>
                        <ion-input formControlName="old_password" type="password" placeholder="Your current password"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label color="primary" stacked>New Password</ion-label>
                        <ion-input formControlName="password" type="password" placeholder="Your new password"></ion-input>
                    </ion-item>
                    <ion-item>
                        <ion-label color="primary" stacked>Confirm New Password </ion-label>
                        <ion-input formControlName="re_password" type="password" placeholder="Enter your new password again"></ion-input>
                    </ion-item>
                    <control-messages [control]="registerForm.controls.re_password"></control-messages>
                    <p ion-text *ngIf="registerForm.get('re_password').errors?.passwordsShouldMatch  && registerForm.get('re_password').dirty" color="danger" padding-left>
                        Mismatch passwords
                    </p>
                    <div [hidden]="!registerForm.get('isToggled').value === true">
                        <br>
                        <ion-title>
                            Change Car Information
                        </ion-title>
                        <ion-item>
                            <ion-label color="primary" fixed>Car Model</ion-label>
                            <ion-input formControlName="car_name" type="text" placeholder="Eg: Perodua Myvi"></ion-input>
                        </ion-item>
                        <p ion-text [hidden]="registerForm.controls.car_name.valid || (registerForm.controls.car_name.pristine && !submitted)" color="danger" padding-left>
                            Your car model can only contain alphabets and spaces
                        </p>
                        <ion-item *ngIf="!registerForm.controls.car_name.valid && !registerForm.controls.car_name.pending && (registerForm.controls.car_name.dirty || submitted)">
                            <p>Sorry, that username can not be used!</p>
                        </ion-item>
                    </div>
                    <ion-item>
                        <ion-label> Do you have a car and want to <br> give rental or delivery service</ion-label>
                        <ion-toggle formControlName="isToggled" (ionChange)="resetCar()"></ion-toggle>
                    </ion-item>
                </ion-list>
            </ion-col>
        </ion-row>
        <ion-row responsive-sm>
            <ion-col>
                <button ion-button (click)="onUpdate(registerForm)" color="secondary" type="submit" block>Update</button>
            </ion-col>
        </ion-row>
    </form>
</ion-content>